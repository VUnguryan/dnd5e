<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layouts/default">
<head>
<title th:text="${'Dnd 5E '+ creature.name}"></title>
<meta charset="utf-8">

<link rel="icon" th:href="@{/resources/icon.png}">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/main.css}" />
<style>
img {
	float: center;
}
.invert {
	filter: invert(100%);
	-webkit-filter: invert(100%) sepia(100%);
}
</style>
</head>
<body>
	<div th:insert="fragments/header :: header(@{/creatures})"></div>
	<div class="container" style="margin-top: 25px">
		<div class="card" th:object="${creature}">
			<h5 class="card-header">
				<span th:text="*{name}"></span><span th:if="*{englishName}"
					th:text="' ('+ *{englishName} + ')'"></span> <small> <span
					th:text="*{sizeName}"></span> <span
					th:text="*{type.cyrilicName}"></span> <a
					th:if="*{raceName != null}"
					th:href="@{'/entities/race/' + *{raceId}}"><span
						th:text="*{raceName}"></span></a>, <span
					th:text="*{alignment.cyrilicName}"></span>
				</small> 
			</h5>
			<div class="card-body">
				<div>
					<b>Класс доспеха</b>
					<th:block th:text="*{AC}" />
					<th:block th:if="${not #lists.isEmpty(creature.armorTypes)}"
						th:text="'(' + *{armorTypeString} + ')'" />
				</div>
				<div>
					<b>Хиты</b> <span th:text="*{averageHp}"></span> (<span
						th:text="*{countDiceHp}"></span><span th:text="*{diceHp}"></span><span
						th:if="${creature.bonusHP != null}"> + <span
						th:text="*{bonusHP}"></span></span>)
				</div>
				<div>
					<b>Скорость</b>
					<th:block th:text="*{allSpeed}" />
				</div>
			</div>
			<div class="card">
				<div class="card-body">
					<table class="table table-sm text-center">
						<thead>
							<tr>
								<th class="text-center" title="Сила">СИЛ</th>
								<th class="text-center" title="Ловкость">ЛОВ</th>
								<th class="text-center" title="Телосложение">ТЕЛ</th>
								<th class="text-center" title="Интелект">ИНТ</th>
								<th class="text-center" title="Мудрость">МДР</th>
								<th class="text-center" title="Харизма">ХАР</th>
							</tr>
						</thead>
						<tr>
							<td th:text="${creature.strengthText()}" />
							<td th:text="${creature.dexterityText()}" />
							<td th:text="${creature.constitutionText()}" />
							<td th:text="${creature.intellectText()}" />
							<td th:text="${creature.wizdomText()}" />
							<td th:text="${creature.charismaText()}" />
						</tr>
					</table>
				</div>
			</div>
			<div class="card">
				<div class="card-body">
					<div th:if="*{!savingThrows.empty}">
						<b>Спасброски </b><span
							th:each="savingThrow, iterStat : *{savingThrows}"
							th:text="!${iterStat.last} ? ${savingThrow.text} + ', ': ${savingThrow.text}"></span>
					</div>
					<div th:if="*{!skills.empty}">
						<b>Навыки </b><span th:each="skill, iterStat : *{skills}"
							th:text="${iterStat.last} ? ${skill.cyrilicText} : ${skill.cyrilicText} +', '"></span>
					</div>
					<div th:if="*{!vulnerabilityDamages.empty}">
						<b>Уязвимость к урону </b><span
							th:each="vulnerabilityDamage, iterStat : *{vulnerabilityDamages}"
							th:text="${iterStat.last} ? ${vulnerabilityDamage.cyrilicName} : ${vulnerabilityDamage.cyrilicName} + ', '"></span>
					</div>
					<div th:if="*{!resistanceDamages.empty}">
						<b>Сопротивление к урону </b><span
							th:each="resistanceDamages, iterStat : *{resistanceDamages}"
							th:text="${iterStat.last} ? ${resistanceDamages.cyrilicName} : ${resistanceDamages.cyrilicName} + ', '"></span>
					</div>
					<div th:if="*{!immunityDamages.empty}">
						<b>Иммунитет к урону </b><span
							th:each="immunityDamage, iterStat : *{immunityDamages}"
							th:text="${iterStat.last} ? ${immunityDamage.cyrilicName} : ${immunityDamage.cyrilicName} + ', '"></span>
					</div>
					<div th:if="*{!immunityStates.empty}">
						<b>Иммунитет к состоянию </b><span
							th:each="state, iterStat : *{immunityStates}"
							th:text="${iterStat.last} ? ${state.cyrilicName} : ${state.cyrilicName} + ', '"></span>
					</div>
					<div>
						<b>Чувства</b> <span th:text="*{allSense}"></span>
					</div>
					<div>
						<b>Языки</b> <span th:each="language, iterStat : *{languages}"
							th:text="${iterStat.last} ? ${language.name} : ${language.name} + ', '">
						</span>
					</div>
					<div>
						<b>Опасность</b> <span th:text="*{challengeRating}"></span> (<span
							th:text="*{exp}"></span> опыта)
					</div>
				</div>
			</div>
			<div th:if="*{!feats.empty}" class="card">
				<div class="card-header">Особенности</div>
				<div class="card-body">
					<div th:each="feat : *{feats}">
						<h5 class="card-title" th:text="${feat.name}"></h5>
						<p th:utext="${feat.description}" />
					</div>
				</div>
			</div>
			<div th:if="${!actions.empty}" class="card">
				<div class="card-header">Действия</div>
				<div class="card-body">
					<div th:each="action : ${actions}">
						<h5 class="card-title">
							<th:block th:text="${action.name}" />
							<img class="invert"
								th:if="${#strings.contains(action.name,'Мультиатака')}"
								th:src="@{/resources/icons/Icon.3_64.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Укус')}"
								th:src="@{/resources/icons/Icon.5_25.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Когти')}"
								th:src="@{/resources/icons/Icon.1_77.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Коготь')}"
								th:src="@{/resources/icons/Icon.5_45.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Хвост')}"
								th:src="@{/resources/icons/Icon.4_85.png}" height="25"
								width="25"><img class="invert"
								th:if="${#strings.contains(action.name,'Кинжал')}"
								th:src="@{/resources/icons/Icons8_21.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Длинный меч')}"
								th:src="@{/resources/icons/Icon.6_98.png}" height="25"
								width="25"> <img class="invert"
								th:if="${action.name eq 'Телепортация'}"
								th:src="@{/resources/icons/Icons8_85.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Короткий меч')}"
								th:src="@{/resources/icons/Icon.1_55.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Ужасаю')}"
								th:src="@{/resources/icons/Icon.1_28.png}" height="25"
								width="25"> <img class="invert"
								th:if="${#strings.contains(action.name,'Размашистый удар')}"
								th:src="@{/resources/icons/Icon.3_31.png}" height="25"
								width="25">
								<img class="invert"
								th:if="${action.name eq 'Копьё'}"
								th:src="@{/resources/icons/Icon.1_58.png}" height="25"
								width="25">
								<img class="invert"
								th:if="${#strings.contains(action.name, 'Оружия дыхания')}"
								th:src="@{/resources/icons/Icon.5_16.png}" height="25"
								width="25">
								<img class="invert"
								th:if="${#strings.contains(action.name, ' лук')}"
								th:src="@{/resources/icons/Icon.4_60.png}" height="25"
								width="25">
								<img class="invert"
								th:if="${#strings.contains(action.name, 'Скимитар')}"
								th:src="@{/resources/icons/Icon.2_62.png}" height="25"
								width="25"><img class="invert"
								th:if="${#strings.contains(action.name, 'посох')}"
								th:src="@{/resources/icons/Icon.7_33.png}" height="25"
								width="25">
						</h5>
						<p th:utext="${action.description}" />
					</div>
				</div>
			</div>
			<div th:if="${!reactions.empty}" class="card">
				<div class="card-header">Реакции</div>
				<div class="card-body">
					<div th:each="action : ${reactions}">
						<b th:text="${action.name}"></b>
						<div th:utext="${action.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${!legendary.empty}" class="xard">
				<div class="card-header text-white bg-danger">Легендарные
					действия</div>
				<div class="card-body">
					<div th:if="${creature.legendary}" th:utext="*{legendary}"></div>
					<div th:each="action : ${legendary}">
						<b th:text="${action.name}"></b>
						<div th:utext="${action.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${creature.description}" class="card">
				<div class="card-header">Описание</div>
				<div class="card-body">
					<p th:utext="*{description}"></p>
				</div>
			</div>
			<div th:if="${!creature.habitates.empty}" class="xard">
				<div class="card-header">Места обитания</div>
				<div class="card-body">
					<th:block th:each="habitate, iterStat : *{habitates}" th:text="${iterStat.last} ? ${habitate.name} : ${habitate.name} + ', '">
					</th:block>
				</div>
			</div>
			<div class="card-footer text-muted" th:if="${creature.book}"
				th:text="'Источник: ' + ${creature.book.name}"></div>
			<img class="card-img-bottom"
				th:src="@{'/resources/creatures/'+ ${creature.id} +'.jpg'}"
				align="middle" />
		</div>
	</div>
</body>
<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script th:src="@{/resources/js/settings.js}"></script>
</html>