<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layouts/default">
<head>
<head>
<style>
.table>tbody .hiddenRow {
	padding: 0 8px;
}
</style>
<title>DnD 5E Сокровища</title>
<meta charset="utf-8">
<link rel="icon" th:href="@{/resources/icon.png}">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/main.css}" />
<link rel="stylesheet" th:href="@{/resources/css/dataTables.bootstrap4.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/searchPanes/searchPanes.bootstrap4.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/select/select.dataTables.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/buttons/buttons.bootstrap4.min.css}" />
<style>
img {
	float: center;
}

.invert {
	filter: invert(100%);
	-webkit-filter: invert(100%) sepia(100%);
}

td.details-control {
	background: url('/resources/open-iconic/svg/plus.svg') no-repeat center
		center;
	cursor: pointer;
}

tr.shown td.details-control {
	background: url('/resources/open-iconic/svg/minus.svg') no-repeat center
		center;
}
</style>
</head>
<body>
	<div th:insert="fragments/header :: header(~{ :: .backgrounds})"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-10 mt-5 mb-5">
				<table id="example" class="table table-hover" style="width: 100%">
					<thead>
						<tr>
							<th>Сокровище</th>
							<th>Стоимость</th>
							<th>Категория</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
	<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
	<script th:src="@{/resources/js/settings.js}"></script>
	<script th:src="@{/resources/js/datatables/jquery.dataTables.min.js}"></script>
	<script th:src="@{/resources/js/datatables/dataTables.bootstrap4.min.js}"></script>
	<script th:src="@{/resources/js/searchPanes/dataTables.searchPanes.js}"></script>
	<script th:src="@{/resources/js/searchPanes/searchPanes.bootstrap4.min.js}"></script>
	<script th:src="@{/resources/js/select/dataTables.select.min.js}"></script>
	<script th:src="@{/resources/js/buttons/dataTables.buttons.min.js}"></script>
	<script th:src="@{/resources/js/buttons/buttons.bootstrap4.min.js}"></script>
	<script th:src="@{/resources/js/buttons/buttons.colVis.min.js}"></script>
	<script src="/resources/js/jquery.spring-friendly.js"></script>
	<script>
	$(document).ready(function() {
		$('a.toggle-vis').on( 'click', function (e) {
	        e.preventDefault();
	        var column = table.column( $(this).attr('data-column') );
	        column.visible( ! column.visible() );
	    });
	
		var table = $('#example').DataTable( {
			iDisplayLength : 25,
	        dom: 'Bfrtip',
			processing : true,
	        serverSide : true,
			ajax : '/treasures',
			columns : [
						{
							data : "name",
							width : "30%", 
						},
						{
							data : "cost",
						    className: "text-center",
							width : "5%",
						}, 
						{
							data : "type",
							width : "10%",
						    searchable: false,
						}, 
					],
					columnDefs : [
			            {
			                targets : [ 2 ],
			                visible : false
			            },
				    ],
				    buttons: [
			        	'searchPanes',
			            {
			        		extend: 'colvis',
			                text: 'Столбцы',
			                buttons: [
			                    {
			                        text: 'Категория',
			                        action: function ( e, dt, node, config ) {
			                            dt.column( 2 ).visible( ! dt.column( 2 ).visible() );
			                        }
			                    },
			                ]
			            }
			        ],
					language : {
						processing : "Загрузка...",
						search : "Поиск",
						lengthMenu : "Показывать _MENU_ записей на странице",
						zeroRecords : "Ничего не найдено",
						info : "Показано с _START_ до _END_ из _TOTAL_",
						infoEmpty : "Нет доступных записей",
						infoFiltered : "(filtered from _MAX_ всего)",
						paginate : {
							first : "В начало",
							previous : "Предыдущая",
							next : "Следущая",
							last : "В конец"
						},
						searchPanes: {
							clearMessage : "Сбросить",
				            title : {
				                    _: 'Отфильтровано - %d',
				                    0: 'Фильтры не активны (Ctrl или Shift для множественного выбора)',
				                    1: 'Один фильтр выбран',
				            },
				            collapse: 'Фильтры (%d)'
				        },
					},
					ordering : true,
				});
		});
		</script>
</body>
</html>